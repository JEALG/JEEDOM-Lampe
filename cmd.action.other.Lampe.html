<div style="width:90px;min-height:62px;margin-bottom: 0px" class="cmd reportModeHidden #history# tooltips cmd-widget cursor" data-type="action" data-subtype="other" data-cmd_id="#id#" data-cmd_uid="#uid#" data-eqLogic_id="#eqLogic_id#" data-eqLogic_id="#eqLogic_id#" data-version="#version#" title="#collectDate#">
    <!-- Info Widget
        Basé sur les widget de 		: ksoul78 / jimmy / snow51
        Mise à jour 				: JAG 20190505 : Simplification code
    -->
    <div class="row title #hide_name#">
        <center>
            <div class='cmdName' id="cmdName#id#" style="font-weight:bold;font-size:10px;#hideCmdName#;margin-bottom: 0px">#valueName#</div>
            <div class="content-sm ">
                <span class="cursor iconCmd#uid# content-sm" title="#name#" ></span>
            </div>
            <div class="value">
                <span class="timeCmd#uid# timeCmd label label-default value"title=""></span>
            </div>
        </center>
    </div>
</div>
<script>
		// Paramètrage du logo
			var srcImglogo		= ('#logo#'!='#'+'logo#') ? "#logo#" : "Lampe";
			var srcImglogo_T 	= ('#logo_type#'!='#'+'logo_type#') ? "#logo_type#" : "png";
		// Paramètre "sizeh" & "sizew"
			var srcImgHeight	= is_numeric('#sizeh#') ? parseFloat('#sizeh#'):80;
			var srcImgWidth 	= is_numeric('#sizew#') ? parseFloat('#sizew#'):80;
  			var srcImgSize 		= 'height='+srcImgHeight+'px width='+srcImgWidth+'px';
		// Paramétrage des images
			var srcImgURL 		= 'plugins/widget/core/template/dashboard/cmd.action.other.Lampe/';
			var srcImgOn 		= srcImgURL + srcImglogo+'-ON.'+ srcImglogo_T;
 			var srcImgOff 		= srcImgURL + srcImglogo+'-OFF.'+ srcImglogo_T;   
  
    jeedom.cmd.update['#id#'] = function(_options){
        //jeedom.cmd.displayDuration(_options.valueDate,  $('.cmd[data-cmd_id=#id#] .timeCmd'));
        $('.cmd[data-cmd_id=#id#]').attr('title','Valeur du '+_options.valueDate+', collectée le '+_options.collectDate);
        if (_options.display_value == '1' || _options.display_value == 1 || _options.display_value == '99' || _options.display_value == 99 || _options.display_value == 'on') {
            if (jeedom.cmd.normalizeName('#name#') == 'on') {
                $('.cmd[data-cmd_id=#id#]').hide();
            }else{
                $('.cmd[data-cmd_id=#id#]').show();
                $('.cmd[data-cmd_id=#id#] .iconCmd#uid#').empty().append('<img src="'+srcImgOn+'" '+srcImgSize+'>');
            }
        } else {
            if (jeedom.cmd.normalizeName('#name#') == 'off') {
                $('.cmd[data-cmd_id=#id#]').hide();
            }else{
                $('.cmd[data-cmd_id=#id#]').show();
                $('.cmd[data-cmd_id=#id#] .iconCmd#uid#').empty().append('<img src="'+srcImgOff+'" '+srcImgSize+'>');
            }
        }
    }
    jeedom.cmd.update['#id#']({display_value:'#state#',valueDate:'#valueDate#',collectDate:'#collectDate#',alertLevel:'#alertLevel#'});
    $('.cmd[data-cmd_uid=#uid#] .iconCmd#uid#').off().on('click', function () {
        jeedom.cmd.execute({id: '#id#'});
    });
</script>